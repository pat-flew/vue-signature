!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vue-signature",[],e):"object"==typeof exports?exports["vue-signature"]=e():t["vue-signature"]=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./dist/",n(n.s=4)}([function(t,e,n){var o=n(2);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n(5).default)("2d03ce3a",o,!1,{})},function(t,e,n){"use strict";var o=n(0);n.n(o).a},function(t,e,n){(e=n(3)(!1)).push([t.i,"\ncanvas {\n\twidth: 100%;\n\theight: 100%;\n}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=(r=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(h," */")),s=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(s).concat([i]).join("\n")}var r,a,h;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(i[r]=!0)}for(var a=0;a<t.length;a++){var h=[].concat(t[a]);o&&i[h[0]]||(n&&(h[2]?h[2]="".concat(n," and ").concat(h[2]):h[2]=n),e.push(h))}},e}},function(t,e,n){"use strict";n.r(e);var o=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{style:{width:this.w,height:this.h},on:{touchmove:function(t){t.preventDefault()}}},[e("canvas",{staticClass:"canvas",attrs:{id:this.uid,"data-uid":this.uid,disabled:this.disabled}})])};o._withStripped=!0;
/*!
 * Signature Pad v3.0.0-beta.3 | https://github.com/szimek/signature_pad
 * (c) 2018 Szymon Nowak | Released under the MIT license
 */class i{constructor(t,e,n){this.x=t,this.y=e,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class s{constructor(t,e,n,o,i,s){this.startPoint=t,this.control2=e,this.control1=n,this.endPoint=o,this.startWidth=i,this.endWidth=s}static fromPoints(t,e){const n=this.calculateControlPoints(t[0],t[1],t[2]).c2,o=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new s(t[1],n,o,t[2],e.start,e.end)}static calculateControlPoints(t,e,n){const o=t.x-e.x,s=t.y-e.y,r=e.x-n.x,a=e.y-n.y,h=(t.x+e.x)/2,c=(t.y+e.y)/2,l=(e.x+n.x)/2,d=(e.y+n.y)/2,u=Math.sqrt(o*o+s*s),f=Math.sqrt(r*r+a*a),p=f/(u+f),v=l+(h-l)*p,g=d+(c-d)*p,m=e.x-v,y=e.y-g;return{c1:new i(h+m,c+y),c2:new i(l+m,d+y)}}length(){let t,e,n=0;for(let o=0;o<=10;o+=1){const i=o/10,s=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const o=s-t,i=r-e;n+=Math.sqrt(o*o+i*i)}t=s,e=r}return n}point(t,e,n,o,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*o*(1-t)*t*t+i*t*t*t}}class r{constructor(t,e={}){this.canvas=t,this.options=e,this._handleMouseDown=t=>{1===t.which&&(this._mouseButtonDown=!0,this._strokeBegin(t))},this._handleMouseMove=t=>{this._mouseButtonDown&&this._strokeMoveUpdate(t)},this._handleMouseUp=t=>{1===t.which&&this._mouseButtonDown&&(this._mouseButtonDown=!1,this._strokeEnd(t))},this._handleTouchStart=t=>{if(t.preventDefault(),1===t.targetTouches.length){const e=t.changedTouches[0];this._strokeBegin(e)}},this._handleTouchMove=t=>{t.preventDefault();const e=t.targetTouches[0];this._strokeMoveUpdate(e)},this._handleTouchEnd=t=>{if(t.target===this.canvas){t.preventDefault();const e=t.changedTouches[0];this._strokeEnd(e)}},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e=250){let n,o,i,s=0,r=null;const a=()=>{s=Date.now(),r=null,n=t.apply(o,i),r||(o=null,i=[])};return function(...h){const c=Date.now(),l=e-(c-s);return o=this,i=h,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,n=t.apply(o,i),r||(o=null,i=[])):r||(r=window.setTimeout(a,l)),n}}(r.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=r.prototype._strokeUpdate,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onBegin=e.onBegin,this.onEnd=e.onEnd,this._ctx=t.getContext("2d"),this.clear(),this.on()}clear(){const t=this._ctx,e=this.canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(t,e={},n){const o=new Image,i=e.ratio||window.devicePixelRatio||1,s=e.width||this.canvas.width/i,r=e.height||this.canvas.height/i;this._reset(),o.onload=()=>{this._ctx.drawImage(o,0,0,s,r),n&&n()},o.onerror=t=>{n&&n(t)},o.src=t,this._isEmpty=!1}toDataURL(t="image/png",e){switch(t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t){this.clear(),this._fromData(t,({color:t,curve:e})=>this._drawCurve({color:t,curve:e}),({color:t,point:e})=>this._drawDot({color:t,point:e})),this._data=t}toData(){return this._data}_strokeBegin(t){const e={color:this.penColor,points:[]};this._data.push(e),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)}_strokeUpdate(t){const e=t.clientX,n=t.clientY,o=this._createPoint(e,n),i=this._data[this._data.length-1],s=i.points,r=s.length>0&&s[s.length-1],a=!!r&&o.distanceTo(r)<=this.minDistance,h=i.color;if(!r||!r||!a){const t=this._addPoint(o);r?t&&this._drawCurve({color:h,curve:t}):this._drawDot({color:h,point:o}),s.push({time:o.time,x:o.x,y:o.y})}}_strokeEnd(t){this._strokeUpdate(t),"function"==typeof this.onEnd&&this.onEnd(t)}_handlePointerEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}_handleMouseEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(t,e){const n=this.canvas.getBoundingClientRect();return new i(t-n.left,e-n.top,(new Date).getTime())}_addPoint(t){const{_lastPoints:e}=this;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);const t=this._calculateCurveWidths(e[1],e[2]),n=s.fromPoints(e,t);return e.shift(),n}return null}_calculateCurveWidths(t,e){const n=this.velocityFilterWeight*e.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n),i={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,i}_strokeWidth(t){return Math.max(this.maxWidth/(t+1),this.minWidth)}_drawCurveSegment(t,e,n){const o=this._ctx;o.moveTo(t,e),o.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve({color:t,curve:e}){const n=this._ctx,o=e.endWidth-e.startWidth,i=2*Math.floor(e.length());n.beginPath(),n.fillStyle=t;for(let t=0;t<i;t+=1){const n=t/i,s=n*n,r=s*n,a=1-n,h=a*a,c=h*a;let l=c*e.startPoint.x;l+=3*h*n*e.control1.x,l+=3*a*s*e.control2.x,l+=r*e.endPoint.x;let d=c*e.startPoint.y;d+=3*h*n*e.control1.y,d+=3*a*s*e.control2.y,d+=r*e.endPoint.y;const u=e.startWidth+r*o;this._drawCurveSegment(l,d,u)}n.closePath(),n.fill()}_drawDot({color:t,point:e}){const n=this._ctx,o="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawCurveSegment(e.x,e.y,o),n.closePath(),n.fillStyle=t,n.fill()}_fromData(t,e,n){for(const o of t){const{color:t,points:s}=o;if(s.length>1)for(let n=0;n<s.length;n+=1){const o=s[n],r=new i(o.x,o.y,o.time);this.penColor=t,0===n&&this._reset();const a=this._addPoint(r);a&&e({color:t,curve:a})}else this._reset(),n({color:t,point:s[0]})}}_toSVG(){const t=this._data,e=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/e,o=this.canvas.height/e,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvas.width.toString()),i.setAttribute("height",this.canvas.height.toString()),this._fromData(t,({color:t,curve:e})=>{const n=document.createElement("path");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){const o=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} `+`C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} `+`${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} `+`${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;n.setAttribute("d",o),n.setAttribute("stroke-width",(2.25*e.endWidth).toFixed(3)),n.setAttribute("stroke",t),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),i.appendChild(n)}},({color:t,point:e})=>{const n=document.createElement("circle"),o="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.setAttribute("r",o.toString()),n.setAttribute("cx",e.x.toString()),n.setAttribute("cy",e.y.toString()),n.setAttribute("fill",t),i.appendChild(n)});const s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+` viewBox="0 0 ${n} ${o}"`+` width="${n}"`+` height="${o}"`+">";let r=i.innerHTML;if(void 0===r){const t=document.createElement("dummy"),e=i.childNodes;t.innerHTML="";for(let n=0;n<e.length;n+=1)t.appendChild(e[n].cloneNode(!0));r=t.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+r+"</svg>")}}var a=r;function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c={name:"vueSignature",props:{sigOption:{type:Object,default:function(){return{backgroundColor:"rgb(255,255,255)",penColor:"rgb(0, 0, 0)"}}},w:{type:String,default:"100%"},h:{type:String,default:"100%"},clearOnResize:{type:Boolean,default:!1},waterMark:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},defaultUrl:{type:String,default:""}},data:function(){return{sig:function(){},option:{backgroundColor:"rgb(255,255,255)",penColor:"rgb(0, 0, 0)"},uid:"",backgroundColor:{r:0,g:0,b:0,a:0}}},watch:{disabled:function(t){t?this.sig.off():this.sig.on()}},created:function(){this.uid="canvas"+this._uid;for(var t=0,e=Object.keys(this.sigOption);t<e.length;t++){var n=e[t];this.option[n]=this.sigOption[n]}},methods:{draw:function(){var t=this,e=document.getElementById(t.uid);function n(){var n;t.isEmpty()||(n=t.save());var o=Math.max(window.devicePixelRatio||1,1);e.width=e.offsetWidth*o,e.height=e.offsetHeight*o,e.getContext("2d").scale(o,o),t.clear(),!t.clearOnResize&&void 0!==n&&t.fromDataURL(n),Object.keys(t.waterMark).length&&t.addWaterMark(t.waterMark)}t.sig=new a(e,t.option),window.addEventListener("resize",n),n(),t.storeBackgroundColor(),""!==t.defaultUrl&&t.fromDataURL(t.defaultUrl)},storeBackgroundColor:function(){var t=document.getElementById(this.uid);if(!t)return 0;var e=t.getContext("2d"),n=t.width,o=t.height,i=e.getImageData(0,0,n,o),s=i.data;console.log("context",e),console.log("len",i.length),this.backgroundColor={r:s[0],g:s[1],b:s[2],a:s[3]},console.log(this.backgroundColor)},getRatioPainted:function(){var t=document.getElementById(this.uid);if(!t)return 0;for(var e=t.getContext("2d"),n=t.width,o=t.height,i=e.getImageData(0,0,n,o).data,s=0,r=this.backgroundColor,a=r.r,h=r.g,c=r.b,l=r.a,d=0,u=i.length;d<u;d+=4)i[d]===a&&i[d+1]===h&&i[d+2]===c&&i[d+3]===l||(s+=1);return s/(n*o)},clear:function(){this.sig.clear()},save:function(t){return t?this.sig.toDataURL(t):this.sig.toDataURL()},fromDataURL:function(t){this.sig.fromDataURL(t)},isEmpty:function(){return this.sig.isEmpty()},undo:function(){var t=this.sig.toData();t&&(t.pop(),this.sig.fromData(t))},addWaterMark:function(t){if("[object Object]"!=Object.prototype.toString.call(t))throw new Error("Expected Object, got "+h(t)+".");var e=document.getElementById(this.uid),n={text:t.text||"",x:t.x||20,y:t.y||20,sx:t.sx||40,sy:t.sy||40},o=e.getContext("2d");o.font=t.font||"20px sans-serif",o.fillStyle=t.fillStyle||"#333",o.strokeStyle=t.strokeStyle||"#333","all"==t.style?(o.fillText(n.text,n.x,n.y),o.strokeText(n.text,n.sx,n.sx)):"stroke"==t.style?o.strokeText(n.text,n.sx,n.sx):o.fillText(n.text,n.x,n.y),this.sig._isEmpty=!1}},mounted:function(){var t=this;this.$nextTick().then((function(){t.draw()}))}};n(1);var l=function(t,e,n,o,i,s,r,a){var h,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),r?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=h):i&&(h=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),h)if(c.functional){c._injectStyles=h;var l=c.render;c.render=function(t,e){return h.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,h):[h]}return{exports:t,options:c}}(c,o,[],!1,null,null,null);l.options.__file="src/lib/vue-signature.vue";var d=l.exports,u={install:function(t,e){t.component(d.name,d)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(u);e.default=u},function(t,e,n){"use strict";function o(t,e){for(var n=[],o={},i=0;i<e.length;i++){var s=e[i],r=s[0],a={id:t+":"+i,css:s[1],media:s[2],sourceMap:s[3]};o[r]?o[r].parts.push(a):n.push(o[r]={id:r,parts:[a]})}return n}n.r(e),n.d(e,"default",(function(){return f}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},r=i&&(document.head||document.getElementsByTagName("head")[0]),a=null,h=0,c=!1,l=function(){},d=null,u="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,n,i){c=n,d=i||{};var r=o(t,e);return p(r),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(h=s[a.id]).refs--,n.push(h)}e?p(r=o(t,e)):r=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var c=0;c<h.parts.length;c++)h.parts[c]();delete s[h.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],o=s[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(g(n.parts[i]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var r=[];for(i=0;i<n.parts.length;i++)r.push(g(n.parts[i]));s[n.id]={id:n.id,refs:1,parts:r}}}}function v(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function g(t){var e,n,o=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(o){if(c)return l;o.parentNode.removeChild(o)}if(u){var i=h++;o=a||(a=v()),e=_.bind(null,o,i,!1),n=_.bind(null,o,i,!0)}else o=v(),e=x.bind(null,o),n=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else n()}}var m,y=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function _(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var s=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}function x(t,e){var n=e.css,o=e.media,i=e.sourceMap;if(o&&t.setAttribute("media",o),d.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}])}));